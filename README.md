# Домашнее задание к занятию 1 «Disaster recovery и Keepalived»

## Задание 1: Настройка отслеживания интерфейсов в HSRP

### Описание задания
Дана схема для Cisco Packet Tracer, рассматриваемая в лекции.
На данной схеме уже настроено отслеживание интерфейсов маршрутизаторов Gi0/1 (для нулевой группы).
Необходимо аналогично настроить отслеживание состояния интерфейсов Gi0/0 (для первой группы).
Для проверки корректности настройки, разорвите один из кабелей между одним из маршрутизаторов и Switch0 и запустите ping между PC0 и Server0.

### Решение

#### Конфигурация Router1
![Конфигурация Router1](screen/Router1.png)

#### Конфигурация Router2
![Конфигурация Router2](screen/Router2.png)

### Файл проекта Cisco Packet Tracer
[Скачать файл проекта](hsrp_advanced+.pkt)


## Задание 2: Настройка Keepalived с проверкой работоспособности веб-сервера

### Описание задания
1. Запустите две виртуальные машины Linux, установите и настройте сервис Keepalived как в лекции, используя пример конфигурационного файла.
2. Настройте любой веб-сервер (например, nginx или simple python server) на двух виртуальных машинах.
3. Напишите Bash-скрипт, который будет проверять доступность порта данного веб-сервера и существование файла index.html в root-директории данного веб-сервера.
4. Настройте Keepalived так, чтобы он запускал данный скрипт каждые 3 секунды и переносил виртуальный IP на другой сервер, если bash-скрипт завершался с кодом, отличным от нуля (то есть порт веб-сервера был недоступен или отсутствовал index.html). Используйте для этого секцию vrrp_script.

### Решение

#### Начальное состояние кластера
![Начальное состояние](screen/start.png)

#### Переключение сервера при остановке nginx
![Переключение при остановке nginx](screen/stop\ nginx.png)

#### Конфигурация MASTER сервера
![Конфигурация MASTER](screen/master.png)

#### Конфигурация BACKUP сервера
![Конфигурация BACKUP](screen/backup.png)

#### Скрипт проверки состояния веб-сервера
![Скрипт проверки](screen/script.png)

